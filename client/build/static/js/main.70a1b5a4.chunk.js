(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(82),r=n.n(o),s=n(4),i=n(15),l=n(7),u=n(191),j=n(157),b=n(192),d=n(13),f=n.n(d),O=(n(112),n(37)),h=n(180),m=Object(h.a)((function(e){return{loginPaper:Object(O.a)({display:"flex",flexDirection:"column",justifyContent:"center",width:"75%",alignItems:"center",backgroundColor:"#e7e7e7",height:"500px"},e.breakpoints.down("sm"),{width:"100%",height:"50%",padding:"20px"})}})),v=n(1);var p=function(e){var t=e.onLogin,n=e.onCreate,a=e.firstUsername,o=Object(c.useRef)(),r=Object(c.useRef)(),i=Object(l.i)().roomId,u=Object(l.g)(),d=Object(c.useState)([]),O=Object(s.a)(d,2),h=O[0],p=O[1],x=Object(c.useState)(a),g=Object(s.a)(x,2),w=g[0],y=g[1],_=m();return Object(c.useEffect)((function(){f.a.get("/getUsers").then((function(e){p(e.data)})).catch((function(e){console.log("err",e)}))}),[]),Object(v.jsxs)(j.a,{className:_.loginPaper,elevation:12,children:[Object(v.jsxs)("select",{onChange:function(e){y(e.target.value)},value:w||"",className:"login__select",children:[Object(v.jsx)("option",{value:"",children:" Select Name"}),h.map((function(e){return Object(v.jsxs)("option",{value:e,children:[" ",e]},e)}))]}),Object(v.jsxs)("div",{className:"login__input-wrapper",children:[Object(v.jsx)("input",{placeholder:"Enter room name",ref:o,defaultValue:i}),Object(v.jsx)("button",{onClick:function(){if(w.length)if(o.current.value){var e=o.current.value;f.a.post("/login",{username:w,room:e}).then((function(){t(w,e),u&&u.push("/voting/".concat(e))})).catch((function(e){window.alert(e.response.data)}))}else window.alert("Enter a room name");else window.alert("select your name")},children:" Login"})]}),Object(v.jsx)("span",{children:" OR"}),Object(v.jsxs)("div",{className:"login__input-wrapper",children:[Object(v.jsx)("input",{placeholder:"Enter number of votes",ref:r}),Object(v.jsx)("button",{onClick:function(){if(w.length)if(r.current.value){var e=Object(b.a)(),t=r.current.value;f.a.post("/createRoom",{username:w,room:e,numberOfVotes:t}).then((function(){n(w,e,r.current.value),u&&u.push("/voting/".concat(e))})).catch((function(e){window.alert(e.response.data)}))}else window.alert("insert number of votes");else window.alert("select your name")},children:" Create Room"})]})]})},x=n(52),g=n(87),w=n.n(g);n(147);var y=function(e){var t=e.username,n=e.room,a=Object(c.useState)(),o=Object(s.a)(a,2),r=o[0],i=o[1],u=Object(c.useState)([]),j=Object(s.a)(u,2),b=j[0],d=j[1],f=Object(c.useState)([]),O=Object(s.a)(f,2),h=O[0],m=O[1],p=Object(c.useState)(""),g=Object(s.a)(p,2),y=g[0],_=g[1],S=Object(c.useState)(!1),E=Object(s.a)(S,2),k=E[0],N=E[1],C=Object(c.useState)([]),M=Object(s.a)(C,2),I=M[0],R=M[1],Y=Object(c.useState)(0),D=Object(s.a)(Y,2),V=D[0],L=D[1],U=Object(l.g)(),A=Object(l.i)().roomId;function T(e){if(e.target.value<0)return window.alert("votes should be positives"),void(e.target.value=0);L(B)}function B(){var e=0;return document.querySelectorAll("input").forEach((function(t){t.value<0?window.alert("votes should be positives"):e+=parseInt(t.value||0)})),e}return Object(c.useEffect)((function(){t||U.push("/login/".concat(A))}),[t,A,U]),Object(c.useEffect)((function(){if(t){var e=w()("/",{query:{username:t,room:A}});return i(e),function(){e.disconnect(n)}}}),[n,t]),Object(c.useEffect)((function(){if(r)return r.on("get-all-users",(function(e){d(e.usernames.filter((function(e){return e!==t}))),R(parseInt(e.numberOfVotes)),_(e.creator),N(e.started)})),r.on("new-user-joined",(function(e){b.includes(e)||k||d((function(t){return[].concat(Object(x.a)(t),[e])}))})),r.on("has-voted",(function(e){h.includes(e)||m((function(t){return[].concat(Object(x.a)(t),[e])}))})),r.on("user-left",(function(e){b.includes(e)&&!k&&d((function(t){return t.filter((function(t){return t!==e}))}))})),r.on("voting-started",(function(){N(!0)})),r.on("receive-votes",(function(){U.push("/result/".concat(A))})),function(){r.off("new-user-joined"),r.off("get-all-users"),r.off("user-left"),r.off("receive-votes"),r.off("voting-started")}}),[r,b,A,U,k]),Object(v.jsxs)("div",{className:"voting__body",children:[Object(v.jsxs)("span",{children:[" total votes : ",I]}),Object(v.jsxs)("span",{children:[" remaining votes : ",I-V]}),Object(v.jsx)("ul",{className:"voting__list",children:b.map((function(e,t){return Object(v.jsxs)("div",{className:"voting__list-items",children:[Object(v.jsxs)("li",{className:h.includes(e)?"voted":"",children:[t+1," - ",e]}),Object(v.jsx)("input",{onChange:T,type:"number",defaultValue:0,id:e})]},e)}))}),Object(v.jsx)("button",{style:{marginTop:"10px"},onClick:function(){var e=B();if(e!==I)window.alert("you have votes remaining: ".concat(I-e));else{var n={};document.querySelectorAll("input").forEach((function(e){n[e.id]=e.value})),r.emit("send-votes",n,A,t),window.alert("votes submitted")}},disabled:!k,children:" Send"}),y===t&&Object(v.jsx)("button",{style:{marginTop:"10px"},onClick:function(){r.emit("start-voting",A)},children:" Start"})]})},_=n(28),S=n.n(_);n(148);var E=function(e){var t=e.username,n=Object(c.useState)({}),a=Object(s.a)(n,2),o=a[0],r=a[1],i=Object(c.useState)([]),u=Object(s.a)(i,2),j=u[0],b=u[1],d=Object(c.useState)(""),O=Object(s.a)(d,2),h=O[0],m=O[1],p=Object(c.useRef)(),x=Object(l.i)().roomId,g=Object(l.g)();return Object(c.useEffect)((function(){f.a.get("/results",{params:{roomId:x}}).then((function(e){r(e.data.votes),m(e.data.creator)})).catch((function(e){console.log("error ",e)}))}),[x]),Object(c.useEffect)((function(){var e=[];Object.keys(o).map((function(t){return e.push({username:t,votes:o[t]})})),b(S.a.sortBy(e,["votes"]).reverse())}),[o]),Object(v.jsxs)("div",{className:"result__body",children:[Object(v.jsx)("span",{children:" Voting Results"}),Object(v.jsx)("ul",{children:j.map((function(e,t){return Object(v.jsxs)("li",{id:"rank".concat(t),children:[" ",e.username," = ",e.votes]},e.username)}))}),t===h&&Object(v.jsx)("button",{onClick:function(){p.current.value?f.a.post("/saveResult",{votes:j,name:p.current.value.trim()}).then((function(){g&&g.push("/histories")})).catch((function(e){window.alert(e.response.data)})):window.alert("Enter a name for result")},children:" Save Results"}),t===h&&Object(v.jsx)("input",{placeholder:"Enter a name for voting",ref:p})]})},k=n(40),N=n.n(k);n(151);var C=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(l.g)();return Object(c.useEffect)((function(){f.a.get("/history").then((function(e){a(e.data.reverse())})).catch((function(e){window.alert(e.response.data)}))}),[]),Object(v.jsxs)("div",{className:"history__body",children:[Object(v.jsx)("span",{children:" Past Voting Results"}),Object(v.jsx)("ul",{className:"history__list",children:n.map((function(e,t){return Object(v.jsxs)("li",{className:"history__list-items",onClick:function(){!function(e){o.push("/histories/".concat(e.name))}(e)},children:[e.name," at ",N()(e.date,"jYYYYjMMjDD").format("jYYYY/jMM/jDD")]},t)}))})]})};n(152);var M=function(){var e=Object(l.i)().name,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],o=n[1];return Object(c.useEffect)((function(){f.a.get("/history/".concat(e)).then((function(e){o(e.data)})).catch((function(e){window.alert(e.response.data)}))}),[e]),Object(v.jsxs)("div",{className:"saved__result__body",children:[Object(v.jsxs)("span",{children:[" Result of ",a.name," at ",N()(a.date,"jYYYYjMMjDD").format("jYYYY/jMM/jDD")]}),Object(v.jsx)("ul",{children:a.votes&&a.votes.map((function(e,t){return Object(v.jsxs)("li",{id:0===t?"rank0":"",children:[" ",e.username," = ",e.votes]},t)}))})]})},I=n(6),R=n(185),Y=n(187),D=n(182),V=n(184),L=n(186),U=n(183);n(153);var A=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=localStorage.getItem("MERIT_MONEY_USERNAME")||"",r=Object(h.a)({table:{minWidth:650}}),i=Object(I.a)((function(e){return{head:{backgroundColor:"#5101d1",color:e.palette.common.white},body:{fontSize:14}}}))(D.a),l=Object(I.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:"#e7e7e7"}}}}))(U.a);Object(c.useEffect)((function(){f.a.get("/overall").then((function(e){var t=e.data,n=[];t.map((function(e){e.votes.map((function(e){var t=S.a.find(n,(function(t){return t.username===e.username}));t?(t.allVotes+=e.votes,t.attempts++):n.push({username:e.username,allVotes:parseInt(e.votes),attempts:1})}))})),n.map((function(e){e.average=parseInt(e.allVotes/e.attempts)})),a(S.a.sortBy(n,["average"]).reverse())})).catch((function(e){window.alert(e.response.data)}))}),[]);var u=r(),b=function(e){a(S.a.sortBy(n,[e]).reverse())};return Object(v.jsxs)("div",{className:"overall__result__body",children:[Object(v.jsx)("span",{children:"Summary of All Voting "}),Object(v.jsx)(V.a,{component:j.a,children:Object(v.jsxs)(R.a,{classname:u.table,"aria-label":"simple table",children:[Object(v.jsx)(L.a,{children:Object(v.jsxs)(U.a,{children:[Object(v.jsx)(i,{children:"Username"}),Object(v.jsx)(i,{style:{cursor:"pointer"},align:"center",onClick:function(){return b("allVotes")},children:"Votes"}),Object(v.jsx)(i,{style:{cursor:"pointer"},align:"center",onClick:function(){return b("attempts")},children:"Attempts"}),Object(v.jsx)(i,{style:{cursor:"pointer"},align:"center",onClick:function(){return b("average")},children:"Average"})]})}),Object(v.jsx)(Y.a,{children:n.map((function(e){return Object(v.jsxs)(l,{style:{border:e.username===o?"5px solid #5101d1":""},children:[Object(v.jsx)(i,{component:"th",scope:"row",children:e.username}),Object(v.jsx)(i,{align:"center",children:e.allVotes}),Object(v.jsx)(i,{align:"center",children:e.attempts}),Object(v.jsx)(i,{align:"center",children:e.average})]},e.username)}))})]})})]})},T=n(188),B=n(189),z=n(190),P=n(193);n(154);function q(e){var t=e.username,n=e.onLogout,c=Object(l.g)();return Object(v.jsxs)("div",{className:"logout__component",onClick:function(){n(),c.push("/login")},children:[Object(v.jsx)("span",{children:t}),Object(v.jsx)(P.a,{})]})}var J=Object(h.a)((function(e){return{navBar:Object(O.a)({display:"flex",flexDirection:"row",height:"100px",backgroundColor:"#5101d1",alignItems:"center"},e.breakpoints.down("sm"),{justifyContent:"center",height:"50px"}),link:{padding:"5px 10px",margin:"0 5px",textDecoration:"none",color:"white",fontSize:"16px","&:hover":{color:"#5101d1",borderRadius:"5px",background:"white"}},activeLink:{padding:"5px 10px",textDecoration:"none",fontSize:"16px",margin:"0 5px",color:"#5101d1",borderRadius:"5px",background:"white"},toolbar:{display:"flex",flexDirection:"row",padding:"10px 10px"}}})),W=function(e){var t=e.username,n=e.setUsername,a=J(),o=Object(l.h)(),r=Object(c.useState)("login"),u=Object(s.a)(r,2),j=u[0],b=u[1],d=Object(T.a)("(min-width:600px)");return Object(c.useEffect)((function(){o.pathname.includes("overall")&&b("overalls"),o.pathname.includes("histories")&&b("histories"),o.pathname.includes("login")&&b("login")}),[o]),Object(v.jsxs)(B.a,{className:a.navBar,elevation:6,children:[Object(v.jsx)(i.b,{className:"login"===j?a.activeLink:a.link,to:"/login",onClick:function(){return b("login")},children:Object(v.jsx)(z.a,{variant:"a",children:"Login"})}),Object(v.jsx)(i.b,{className:"histories"===j?a.activeLink:a.link,to:"/histories",onClick:function(){return b("histories")},children:Object(v.jsx)(z.a,{variant:"a",children:"History"})}),Object(v.jsx)(i.b,{className:"overalls"===j?a.activeLink:a.link,to:"/overalls",onClick:function(){return b("overalls")},children:Object(v.jsx)(z.a,{variant:"a",children:"Overall"})}),d&&Object(v.jsx)("div",{style:{position:"absolute",display:"flex",justifyContent:"center",width:"100%",zIndex:"-19"},children:Object(v.jsx)(z.a,{variant:"h4",children:"Welcome To Merit Money Project"})}),t&&Object(v.jsx)(q,{username:t,onLogout:n})]})};n(155);var H=function(){var e=Object(c.useState)(localStorage.getItem("MERIT_MONEY_USERNAME")||""),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),r=Object(s.a)(o,2),j=r[0],b=r[1];function d(e,t){a(e),b(t),localStorage.setItem("MERIT_MONEY_USERNAME",e)}function f(e,t){localStorage.setItem("MERIT_MONEY_USERNAME",e),a(e),b(t)}return Object(v.jsx)(i.a,{children:Object(v.jsxs)(u.a,{style:{height:"100vh",display:"flex",justifyContent:"center"},children:[Object(v.jsx)(W,{username:n,setUsername:function(){a(""),localStorage.removeItem("MERIT_MONEY_USERNAME")}}),Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/",exact:!0,children:Object(v.jsx)(l.a,{to:"/login"})}),Object(v.jsx)(l.b,{path:"/login/:roomId",children:n?Object(v.jsx)(l.a,{to:"/voting/".concat(j)}):Object(v.jsx)(p,{onLogin:d,onCreate:f})}),Object(v.jsx)(l.b,{path:"/login",children:Object(v.jsx)(p,{onLogin:d,onCreate:f,firstUsername:n})}),Object(v.jsx)(l.b,{path:"/voting/:roomId",children:Object(v.jsx)(y,{username:n,room:j})}),Object(v.jsx)(l.b,{path:"/result/:roomId",children:Object(v.jsx)(E,{username:n})}),Object(v.jsx)(l.b,{path:"/histories/:name",children:Object(v.jsx)(M,{})}),Object(v.jsx)(l.b,{path:"/histories",children:Object(v.jsx)(C,{})}),Object(v.jsx)(l.b,{path:"/overalls",children:Object(v.jsx)(A,{})})]})]})})};r.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(H,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.70a1b5a4.chunk.js.map